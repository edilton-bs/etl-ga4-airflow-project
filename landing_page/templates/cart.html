<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrinho - Aluga Filmes</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    :root {
      --primary: #ff9900;
      --secondary: #333;
      --bg-light: #f9f9f9;
    }
    body { background: var(--bg-light); font-family: Poppins, sans-serif; margin:0; padding:0; }
    header { background: var(--secondary); color: #fff; padding: 1rem; }
    header h1 { margin: 0; font-size: 1.5rem; }
    nav ul { list-style: none; display: flex; gap:1rem; padding:0; margin:0; }
    nav a { color: #fff; text-decoration:none; }
    .cart-items { max-width: 800px; margin: 2rem auto; padding: 0 1rem; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .cart-items h2 { margin-top: 0; padding: 1.5rem 1rem 0; font-size: 1.75rem; }
    .cart-item { display: flex; gap: 1rem; align-items: center; padding: 1rem; border-bottom: 1px solid #eee; }
    .cart-item:last-child { border-bottom: none; }
    .cart-item img { width: 100px; border-radius: 4px; object-fit: cover; }
    .cart-item-info h3 { margin: 0 0 0.5rem; font-size: 1.25rem; color: var(--secondary); }
    .cart-item-info p { margin:0; }
    .buttons { display: flex; justify-content: flex-end; gap: 1rem; padding: 1rem; }
    button { font-size: 1rem; padding: 0.75rem 1.5rem; border: none; border-radius: 6px; cursor: pointer; }
    button.primary { background: var(--primary); color: #fff; }
    button.secondary { background: #e0e0e0; color: var(--secondary); }
    button:focus-visible { outline: 2px solid var(--primary); }
  </style>
</head>
<body>
  <header>
    <h1>Carrinho</h1>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="catalog">Catálogo</a></li>
        <li><a href="cart">Carrinho</a></li>
      </ul>
    </nav>
  </header>

  <section class="cart-items">
    <h2>Filmes no seu carrinho</h2>
    <!-- Itens são inseridos via JavaScript -->
  </section>

  <div class="buttons">
    <button class="secondary" id="clear-btn">Limpar Carrinho</button>
    <button class="primary" id="checkout-btn">Finalizar Compra</button>
  </div>

  <footer>
    <p>&copy; 2025 Aluga Filmes. Todos os direitos reservados.</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const data = localStorage.getItem('ultimoFilme');
      const container = document.querySelector('.cart-items');
      if (data) {
        const { title, img, price } = JSON.parse(data);
        container.innerHTML = `
          <div class="cart-item">
            <img src="${img}" alt="${title}">
            <div class="cart-item-info">
              <h3>${title}</h3>
              <p>Preço: ${price}</p>
            </div>
          </div>
        `;
      } else {
        container.innerHTML = '<p style="padding:1rem;">Seu carrinho está vazio.</p>';
      }

      document.getElementById('clear-btn').addEventListener('click', () => {
        localStorage.removeItem('ultimoFilme');
        container.innerHTML = '<p style="padding:1rem;">Seu carrinho está vazio.</p>';
      });

      document.getElementById('checkout-btn').addEventListener('click', () => {
        alert('Compra finalizada com sucesso!');
        // Aqui você pode redirecionar para confirm.html ou outra página
        localStorage.removeItem('ultimoFilme');
        container.innerHTML = '<p style="padding:1rem;">Seu carrinho está vazio.</p>';
      });
    });
  </script>
</body>
</html>
